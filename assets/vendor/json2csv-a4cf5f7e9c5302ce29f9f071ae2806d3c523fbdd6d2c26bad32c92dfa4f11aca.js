!function(){function e(e,n){function i(e,n){if(e.data=JSON.parse(JSON.stringify(e.data)),!Array.isArray(e.data)){var i=[];i[0]=e.data,e.data=i}e.fieldNames&&e.fieldNames.length!==e.fields.length&&n(new Error("fieldNames and fields should be of the same length, if fieldNames is provided.")),e.fieldNames=e.fieldNames||e.fields,e.del=e.del||",",e.eol=e.eol||"",e.hasCSVColumnTitle!==!1&&(e.hasCSVColumnTitle=!0),n(null)}function t(e,n){var i="";e.hasCSVColumnTitle&&e.fieldNames.forEach(function(n){""!==i&&(i+=e.del),i+=JSON.stringify(n)}),n(null,i)}function f(e,n,i){e.data.forEach(function(i){if(i&&Object.getOwnPropertyNames(i).length>0){var t="";e.fields.forEach(function(n){i.hasOwnProperty(n)&&(t+=JSON.stringify(i[n])),t+=e.del}),t=t.substring(0,t.length-1),t=t.replace(/\\"/g,'""'),""!==n?n+="\n"+t+e.eol:n=t+e.eol}}),i(n)}i(e,function(i){if(i)return n(i);t(e,function(i,t){if(i)return n(i);f(e,t,function(e){n(null,e)})})})}e.version="0.0.1","function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.json2csv=e}();